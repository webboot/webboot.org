"use strict";function _toArray(a){return _arrayWithHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableRest()}function _iterableToArray(a){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(a))return Array.from(a)}function _objectWithoutProperties(a,b){if(null==a)return{};var c,d,e=_objectWithoutPropertiesLoose(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],!(0<=b.indexOf(c))&&Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}function _objectWithoutPropertiesLoose(a,b){if(null==a)return{};var c,d,e={},f=Object.keys(a);for(d=0;d<f.length;d++)c=f[d],0<=b.indexOf(c)||(e[c]=a[c]);return e}function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_unsupportedIterableToArray(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(a,b){if(a){if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(a,b):void 0}}function _arrayLikeToArray(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function _iterableToArrayLimit(a,b){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}}function _arrayWithHoles(a){if(Array.isArray(a))return a}function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}var _ref=function(){var a=2,b=3,c={},d=[],e=d.map,f=Array.isArray,g="undefined"==typeof requestAnimationFrame?setTimeout:requestAnimationFrame,h=function(a){var b="";if("string"==typeof a)return a;if(f(a)&&0<a.length)for(var c,d=0;d<a.length;d++)""!==(c=h(a[d]))&&(b+=(b&&" ")+c);else for(var d in a)a[d]&&(b+=(b&&" ")+d);return b},j=function(c,a){var b={};for(var d in c)b[d]=c[d];for(var d in a)b[d]=a[d];return b},k=function(a){return a.reduce(function(a,b){return a.concat(b&&!0!==b?"function"==typeof b[0]?[b]:k(b):0)},d)},l=function(c,a){return f(c)&&f(a)&&c[0]===a[0]&&"function"==typeof c[0]},m=function(c,a){if(c!==a)for(var b in j(c,a)){if(c[b]!==a[b]&&!l(c[b],a[b]))return!0;a[b]=c[b]}},n=function(a,b,c){for(var d,e,f=0,g=[];f<a.length||f<b.length;f++)d=a[f],e=b[f],g.push(e?!d||e[0]!==d[0]||m(e[1],d[1])?[e[0],e[1],e[0](c,e[1]),d&&d[2]()]:d:d&&d[2]());return g},o=function(a,b,c,d,e,f){if("key"===b);else if("style"===b)for(var g in j(c,d))c=null==d||null==d[g]?"":d[g],"-"===g[0]?a[b].setProperty(g,c):a[b][g]=c;else"o"===b[0]&&"n"===b[1]?((a.actions||(a.actions={}))[b=b.slice(2)]=d)?!c&&a.addEventListener(b,e):a.removeEventListener(b,e):!f&&"list"!==b&&b in a?a[b]=null==d?"":d:null!=d&&!1!==d&&("class"!==b||(d=h(d)))?a.setAttribute(b,d):a.removeAttribute(b)},p=function(a,c,d){var e=a.props,f=a.type===b?document.createTextNode(a.name):(d=d||"svg"===a.name)?document.createElementNS("http://www.w3.org/2000/svg",a.name,{is:e.is}):document.createElement(a.name,{is:e.is});for(var g in e)o(f,g,null,e[g],c,d);for(var h=0,j=a.children.length;h<j;h++)f.appendChild(p(a.children[h]=u(a.children[h]),c,d));return a.node=f},q=function(a){return null==a?null:a.key},r=function(a,c,d,e,f,g){if(d===e);else if(null!=d&&d.type===b&&e.type===b)d.name!==e.name&&(c.nodeValue=e.name);else if(null==d||d.name!==e.name)c=a.insertBefore(p(e=u(e),f,g),c),null!=d&&a.removeChild(d.node);else{var h,k,l,m,n=d.props,s=e.props,t=d.children,v=e.children,w=0,x=0,y=t.length-1,z=v.length-1;for(var A in g=g||"svg"===e.name,j(n,s))("value"===A||"selected"===A||"checked"===A?c[A]:n[A])!==s[A]&&o(c,A,n[A],s[A],f,g);for(;x<=z&&w<=y&&null!=(l=q(t[w]))&&l===q(v[x]);)r(c,t[w].node,t[w],v[x]=u(v[x++],t[w++]),f,g);for(;x<=z&&w<=y&&null!=(l=q(t[y]))&&l===q(v[z]);)r(c,t[y].node,t[y],v[z]=u(v[z--],t[y--]),f,g);if(w>y)for(;x<=z;)c.insertBefore(p(v[x]=u(v[x++]),f,g),(k=t[w])&&k.node);else if(x>z)for(;w<=y;)c.removeChild(t[w++].node);else{for(var A=w,B={},C={};A<=y;A++)null!=(l=t[A].key)&&(B[l]=t[A]);for(;x<=z;){if(l=q(k=t[w]),m=q(v[x]=u(v[x],k)),C[l]||null!=m&&m===q(t[w+1])){null==l&&c.removeChild(k.node),w++;continue}null==m||1===d.type?(null==l&&(r(c,k&&k.node,k,v[x],f,g),x++),w++):(l===m?(r(c,k.node,k,v[x],f,g),C[m]=!0,w++):null==(h=B[m])?r(c,k&&k.node,null,v[x],f,g):(r(c,c.insertBefore(h.node,k&&k.node),h,v[x],f,g),C[m]=!0),x++)}for(;w<=y;)null==q(k=t[w++])&&c.removeChild(k.node);for(var A in B)null==C[A]&&c.removeChild(B[A].node)}}return e.node=c},s=function(c,a){for(var b in c)if(c[b]!==a[b])return!0;for(var b in a)if(c[b]!==a[b])return!0},t=function(a){return"object"===_typeof(a)?a:w(a)},u=function(b,c){return b.type===a?((!c||!c.lazy||s(c.lazy,b.lazy))&&((c=t(b.lazy.view(b.lazy))).lazy=b.lazy),c):b},v=function(a,b,c,d,e,f){return{name:a,props:b,children:c,node:d,type:f,key:e}},w=function(a,e){return v(a,c,d,e,void 0,b)},x=function(a){return a.nodeType===b?w(a.nodeValue,a):v(a.nodeName.toLowerCase(),c,e.call(a.childNodes,x),a,void 0,1)};return{h:function h(a,b){for(var d,e=[],g=[],h=arguments.length;2<h--;)e.push(arguments[h]);for(;0<e.length;)if(f(d=e.pop()))for(var h=d.length;0<h--;)e.push(d[h]);else if(!1===d||!0===d||null==d);else g.push(t(d));return b=b||c,"function"==typeof a?a(b,g):v(a,b,g,void 0,b.key)},app:function app(a){var b={},c=!1,d=a.view,e=a.node,h=e&&x(e),i=a.subscriptions,j=[],l=function(a){o(this.actions[a.type],a)},m=function(a){return b!==a&&(b=a,i&&(j=n(j,k([i(b)]),o)),d&&!c&&g(p,c=!0)),b},o=(a.middleware||function(a){return a})(function(a,c){return"function"==typeof a?o(a(b,c)):f(a)?"function"==typeof a[0]||f(a[0])?o(a[0],"function"==typeof a[1]?a[1](c):a[1]):(k(a.slice(1)).map(function(a){a&&a[0](o,a[1])},m(a[0])),b):m(a)}),p=function(){c=!1,e=r(e.parentNode,e,h,h=t(d(b)),l)};o(a.init)}}}(),h=_ref.h,app=_ref.app,C=function(a){return function(){var b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},d=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1],e=function(a){for(var b=arguments.length,c=Array(1<b?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return c.some(function(b){return b===_typeof(a)})};if(!d)if(e(b,"string","number","function")||Array.isArray(b))d=b,b={};else if(e(b.View,"function"))d=b.View,b={};else if(b.props||b.c)return h(a,{},b);return h(a,b,d)}},a=C("a"),b=C("b"),button=C("button"),circle=C("circle"),code=C("code"),div=C("div"),em=C("em"),figcaption=C("figcaption"),figure=C("figure"),footer=C("footer"),g=C("g"),h1=C("h1"),h2=C("h2"),h3=C("h3"),h4=C("h4"),h5=C("h5"),header=C("header"),img=C("img"),input=C("input"),label=C("label"),li=C("li"),link=C("link"),main=C("main"),meta=C("meta"),nav=C("nav"),ol=C("ol"),p=C("p"),path=C("path"),pre=C("pre"),script=C("script"),span=C("span"),svg=C("svg"),title=C("title"),ul=C("ul"),view=C("view"),initialState={branding:["@web","boot"],description:"solving the tofu problem, one boot at a time.",footer:{one:{before:["trust on every step.","created by the @webboot dao."],menu:[{text:"privacy notice",to:"/privacy/"}],title:"@webboot"},three:{menu:[{text:"npm",to:"https://www.npmjs.com/org/webboot"},{text:"twitter",to:"https://twitter.com/webbootorg"},{text:"keybase",to:"https://keybase.io/webboot"},{text:"github",to:"https://github.com/webboot"},{text:"gitlab",to:"https://gitlab.com/webboot"}],title:"social links"},two:{menu:[{text:"index",to:"/"},{text:"tofu",to:"/tofu/"},{text:"tosu",to:"/tosu/"},{text:"getting-started",to:"/getting-started/"},{text:"privacy",to:"/privacy/"},{text:"warrant canary",to:"/canary/"},{text:"support",to:"/support/"}],title:"sitemap"}},gdpr:{allowed:[]},hero:{content:["automagically verify the integrity of homepages,","before you load them."],description:"trust on every step",menu:[{text:"about",to:"/#about"},{text:"usage",to:"/getting-started/"},{text:"support",to:"/#support"}],title:["@web","boot"]},lightbox:{float:{}},menu:[{text:"usage",to:"/getting-started/"},{text:"tofu",to:"/tofu/"},{text:"tosu",to:"/tosu/"}],pageClass:{},pages:{"/":{title:"@webboot"},"/canary/":{title:"@magic - warrant canary"},"/docs/api/":{title:"@webboot - api docs"},"/getting-started/":{title:"@webboot - getting started"},"/privacy/":{title:"@webboot - privacy policy"},"/support/":{title:"@webboot - support"},"/tofu/":{title:"@webboot - tofu"},"/tosu/":{title:"@webboot - tosu"}},root:"/",seo:{about:"solving the tofu problem, one boot at a time.",author:{"@type":"person",image:"https:/jaeh.at/img/jascha.ehrenreich.jpg",jobTitle:"Technomancer",name:"Jascha Ehrenreich",url:"https://jaeh.at"},image:"https://webboot.org/webboot-preview.jpg",name:"@webboot",url:"https://webboot.org/"},theme:"dark",title:"@webboot",url:"/"},helpers={listenPopState:function listenPopState(a,b){var c=function(c){return a(b,c)};return addEventListener("popstate",c),function(){return removeEventListener("popstate",c)}}},Bird=function(){return svg({class:"Bird",viewBox:"0 0 839 839",height:"20",width:"20"},[path({d:"M431 536a550 550 0 00392 159c8 0 13-9 8-16-51-69-260-339-454-453 20-12 36-31 46-52l46-18c7-2 9-11 3-16l-41-40C408 40 357 0 307 0h-1C123 49 91 268 180 392c12 67 53 182 184 234 24 9 46 17 68 23v106H0v84h840v-84H508c2-37 40-87 39-87-142-98-223-206-224-347 10 82 58 164 108 215zM347 71a25 25 0 010 50c-14-1-24-12-25-25 1-14 14-25 25-25z"})])},BlogMonth=function(a){var b,c=a.blog,d=a.link,e=a.month,f=a.url,g=a.year,h=Object.entries(c[g][e]),i=[e];return d?b="".concat(d).concat(e,"/"):i.push(" - ",g),[h3(b?Link({to:b},i):i),h.map(function(c){var d=_slicedToArray(c,2),e=d[0],f=d[1];return f.map(function(c){return BlogTeaser(_objectSpread(_objectSpread(_objectSpread({},a),c.state),{},{name:c.name,link:b,day:e}))})})]},BlogTeaser=function(a){return div([h4([a.day,"-",a.month,"-",a.year," - ",Link({to:a.name},a.title)]),p(a.description)])},BlogYear=function(a){var b,c=a.link,d=a.year,e=a.blog,f=a.url;return c?b="".concat(c).concat(d,"/"):f.endsWith("".concat(d,"/"))&&(b=f),div([h2(c?Link({to:b},d):d),Object.entries(e[d]).map(function(c){var d=_slicedToArray(c,2),e=d[0],f=d[1];return BlogMonth(_objectSpread(_objectSpread({},a),{},{month:e,days:f,link:b}))})])},Credits=function(){return div({class:"Credits"},["made with a few bits of ",Link({to:"https://magic.github.io/",target:"_blank",rel:"noopener"},"magic")])},Footer=function(a,b){var c=a.footer,d=c.one,e=c.two,f=c.three;return footer({class:"Footer"},[div({class:"Container"},[(d||e||f)&&div({class:"Menus"},[d&&div({class:"Child Info"},[d.title&&h2(d.title),d.before&&d.before.map(function(b){return p(b)}),d.menu&&ul([d.menu.map(function(a){return li(Link(a))})]),d.after&&d.after.map(function(b){return p(b)})]),e&&div({class:"Child"},[e.title&&h2(e.title),e.before&&e.before.map(function(b){return p(b)}),e.menu&&ul([e.menu.map(function(a){return li(Link(a))})]),e.after&&e.after.map(function(b){return p(b)})]),f&&div({class:"Child"},[f.title&&h2(f.title),f.before&&f.before.map(function(b){return p(b)}),f.menu&&ul([f.menu.map(function(a){return li(Link(a))})]),f.after&&f.after.map(function(b){return p(b)})])]),Credits(a),b])])},Gdpr=function(a){var b=a.gdpr,c=void 0===b?{}:b,d=a.cookies,e=void 0===d?[]:d,f=c.show,h=c.title,i=void 0===h?"Privacy Information":h,j=c.content,k=void 0===j?"This app neither saves, collects, nor shares any data about you.":j,l=c.noDataText,m=void 0===l?"Awesome.":l,n=c.allowTitle,o=void 0===n?"Allow:":n,q=c.allowAllText,r=void 0===q?"All":q,s=c.allowText,t=void 0===s?"Selected":s,u=c.denyText,v=void 0===u?"None":u;if(!f)return div({class:"Gdpr"},svg({class:"ShowHide",onclick:[actions.gdpr.show,{show:!0}],viewBox:"0 0 512 512"},[g([path({d:"\nM507,208c-1-7-7-12-14-13c-7-1-13,3-16,9\nc-5,11-16,19-29,19c-14,0-26-10-30-23c-2-8-11-13-19-11\nC393,191,389,192,384,192c-35-0-64-29-64-64c0-5,1-9,2-14\nc2-8-3-16-11-19C297,90,288,78,288,64c-0-13,8-24,19-29\nc6-3,10-9,9-16c-1-7-6-12-13-14C288,2,272,0,256,0\nC115,0,0,115,0,256c0,141,115,256,256,256c141-0,256-115,256-256\nC512,239,510,224,507,209z M414,414C374,455,318,480,256,480s-118-25-158-66\nC57,374,32,318,32,256S57,138,98,98C138,57,194,32,256,32c3,0,6,0,9,0\nC259,42,256,52,256,64c0,24,13,44,33,55C288,122,288,125,288,128\nc0,53,43,96,96,96c3,0,6-0,8-0C403,242,424,256,448,256\nc11-0,22-3,32-8c0,3,0,6,0,9C480,318,455,374,414,414z\n"}),circle({cx:"192",cy:"128",r:"32"}),circle({cx:"128",cy:"256",r:"32"}),circle({cx:"288",cy:"384",r:"32"}),circle({cx:"272",cy:"272",r:"16"}),circle({cx:"400",cy:"336",r:"16"}),circle({cx:"176",cy:"368",r:"16"})])]));var w=!!e.length;return div({class:"Gdpr"},[div({class:"Container"},[i&&h3(i),k&&p(k),w&&[ul(e.map(function(a){var b=a.name,d=a.title,e=a.content,f=a.allowed;return li({class:"Cookie"},[input({type:"checkbox",title:"allow ".concat(b," data"),id:b,checked:c.allowed.includes(b),onchange:[actions.gdpr.toggleAllow,{name:b}]}),(d||e)&&label({for:b},[d&&h4(d),e&&p(e)])])}))],w?[h5(o),input({class:"allow all",onclick:actions.gdpr.allow,type:"button",value:r}),input({class:"allow",onclick:actions.gdpr.close,type:"button",value:t}),input({class:"allow none",onclick:actions.gdpr.deny,type:"button",value:v})]:input({onclick:actions.gdpr.close,value:m,type:"button"})])])},Header=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[],c=a.logo,d=a.menu,e=a.title,f=_objectWithoutProperties(a,["logo","menu","title"]);if(c||d){var g=f.branding,h=void 0===g?[]:g,i=f.root;Array.isArray(h)||(h=[h]);var j=h,k=_toArray(j),l=k[0],m=k.slice(1);return header({class:"Header"},div([Logo({root:i}),l&&Link({to:i,class:"branding"},[span(l),m]),d&&Menu({state:f,items:d})]))}},Hero=function(a){var b=a.state,c=b.hero,d=Array.isArray(c.title)?c.title:[c.title],e=c.content;return e&&!Array.isArray(e)&&(e=[e]),div({id:"hero",class:"Hero"},[div({class:"LogoWrapper"},[Logo(b),c.title&&h1([span(d[0]),d[1]]),c.description&&p(c.description)]),e&&div({class:"content"},e.map(function(b){return p(b)})),c.menu&&Menu({items:c.menu,state:b})])},Img=function(a){if("string"==typeof a&&(a={src:a}),!!a.src)return a.alt||(a.title?a.alt=a.title:(a.role="presentation",a.alt="")),img(a)},LightBox=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};a.right="true"===a.right;var b=a.url,c=a.right,d=a.text,e=a.img,f=a.height,g=a.width,h=a.title,i=a.state,j=i.float,k=void 0===j?{}:j,l=[actions.lightbox.toggle,e],m=k&&k[e];return figure({class:{LightBox:!0,right:c},title:h},[e&&Img({src:e,height:f,width:g,onclick:l}),(d||b)&&figcaption(b?Link({to:b,text:d||b}):d),e&&div({class:{focused:!0,show:m},onclick:l},Img(e))])},LightSwitch=function(){0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return button({class:"LightSwitch",onclick:actions.changeTheme},svg({viewBox:"0 0 352 460"},[path({d:"M149 48C96 48 48 95 47 143c-1 13 19 17 20 0-1-35 48-75 83-75 15 0 12-22-1-20z"}),path({d:"M176 0C74 0 0 83 0 176c9 91 84 118 100 204h20c-16-92-97-138-100-204C22 70 105 21 176 20zM95 400c2 68 20 48 40 60h82c20-12 38 8 40-60z"}),path({d:"M175 0c102 0 177 83 177 176-9 91-86 118-102 204h-20c16-92 99-138 102-204-2-106-86-155-157-156z"})]))},Link=function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],d=b.to,e=b.action,f=void 0===e?actions.go:e,g=_objectWithoutProperties(b,["to","action"]),h=g.href,i=g.text,j=g.nofollow,k=g.noreferrer,l=_objectWithoutProperties(g,["href","text","nofollow","noreferrer"]);d=d||h||"",l.href=d;var m="/"===d[0]||"#"===d[0];return m?l.onclick=[f,lib.preventDefault]:(l.target="_blank",l.rel="noopener",j&&(l.rel+=" nofollow"),k&&(l.rel+=" noreferrer")),a(l,[i,c])},List=function(a){return ul({class:"List"},a.map(function(a){return[li([Img({src:a.img,height:"90",width:"90"}),div([h4(Link({to:a.to},a.title)),p(a.text)])])]}))},Logo=function(a){return Link({to:a.root,class:"Logo"},[svg({viewBox:"0 0 640 500"},[path({class:"upper",d:"\nM 6 415\nc 213 -43 414 78 627 21 7 -136 -21 -129 -64 -129 -103 7 -167 9 -207 -64 -78 19 -77 21 -85 7 -11 -19 -9 -13 78 -35\nl -7 -29\nc -85 27 -90 23 -92 14 -8 -18 -5 -19 85 -42\nl -7 -29\nc -96 24 -87 25 -92 14 -4 -23 4 -23 89 -43\nl -4 -29\nc -85 21 -92 28 -92 14 0 -21 0 -21 92 -42 0 -43 9 -43 -27 -43\nC 200 7 63 1 35 30 63 151 -8 265 6 415\nz\n".trim(),fill:"#ea4444"}),path({class:"sole",d:"\nM 5 429\nc -5 36 -5 42 -1 71\nh 206\nc -57 -93 79 0 250 0 164 0 180 -14 180 -50 -220 64 -415 -64 -635 -21\nz\n".trim(),fill:"#5a5a5a"})])])},Menu=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=a["class"],c=void 0===b?"Menu":b,d=a.collapse,e=a.items,f=a.state,g=f.url,h=f.hash,i=f.root;return h&&!g.endsWith(h)&&(g+="#".concat(h)),nav({className:c},ul(e.map(function(a){return MenuItem(_objectSpread(_objectSpread({},a),{},{url:g,root:i,collapse:void 0===d||d}))})))},MenuItem=function(a){var b=a.text,c=a.items,d=void 0===c?[]:c,e=a.url,f=a.root,g=a.parentTo,h=void 0===g?void 0:g,j=a.collapse,k=_objectWithoutProperties(a,["text","items","url","root","parentTo","collapse"]),l={class:{}},i=k.to;f&&i.startsWith("/")&&(i=i.substr(1));var m=k.to[0];h&&("-"===m||"#"===m)&&(i=h+i);var n=i.startsWith(f);f&&("/"===m||"-"===m||"#"===m)&&!n&&(i=f+i),k.to=i.replace(/\/\//g,"/"),k.to===e&&(l["class"].active=!0);var o=[],p=e.startsWith(k.to)||!j;return p&&d.length&&(o=ul(d.map(function(a){return MenuItem(_objectSpread({parentTo:k.to,url:e,root:f,collapse:j},a))}))),li(l,[k.to?MenuLink(k,b):span(k,b),o])},MenuLink=function(a,b){return Link(a,b)},Page=function(a,b){var c=a.page,d=a.state,e={id:"Magic",class:d.pageClass};return main(e,div({class:{Wrapper:!0}},[Header(d),div({class:"Page",id:"page"},c(d)),Footer(d),b]))},Pre=function(a,b){"string"==typeof a?a={content:a}:b?a=_objectSpread({content:b},a):Array.isArray(a)&&(a={content:a.join("")});var c=a,d=c.content,e=c.lines,f=!(void 0!==e)||e;return div({class:{Pre:!0,lines:!f||"false"!==f}},[div({class:"menu"},[button({onclick:[actions.pre.clip,function(a){return{e:a,content:d}}]},"copy")]),pre(d.trim().split("\n").map(Pre.Line))])};Pre.Comment=function(a){return span({class:"comment"},a)},Pre.Line=function(a){return code({class:"line"},Pre.Words(a))},Pre.Word=function(a){if(!a)return"";var b=a.includes("://"),c=a.startsWith("mailto:")||a.includes("@")&&a.includes(".");if(b||c)return Link({to:a,text:a});var d="";return"state"===a?d="state":"actions"===a?d="actions":lib.pre.keywords.includes(a)?d="keyword":lib.pre.builtins.includes(a)?d="builtin":lib.pre.booleans.includes(a)&&(d="boolean"),d?span({class:d},a):a},Pre.Words=function(a){var b=a.split(lib.pre.commentRegex),c=_toArray(b),d=c[0],e=c.slice(1),f=!d.endsWith(":")&&e.length;if(f)return[Pre.Words(d),Pre.Comment(e.join("").split(lib.pre.wordRegex).map(Pre.Word))];var g=[],h=a;if(a.replace(lib.pre.stringRegex,function(a){var b=h.split(a),c=_slicedToArray(b,2),d=c[0],e=c[1];g.push(d.split(lib.pre.wordRegex).map(Pre.Word)),g.push(span({class:"string"},a)),h=e}),h!==a)return g.push(h.split(lib.pre.wordRegex).map(Pre.Word)),g;var i=a.split(lib.pre.wordRegex);return i.map(Pre.Word)};var Support=function(){return List([{img:"/support/bwb.jpg",to:"https://bwb.is",title:"bwb",text:"evangelism"},{img:"/support/metalab.jpg",to:"https://metalab.at",title:"metalab",text:"inspiration"},{img:"/support/parallele.jpg",to:"https://parallele.at",title:"parallele polis",text:"workspace"}])},Team=function(){return List([{img:"/team/jascha.jpg",to:"https://keybase.io/jascha/",title:"jascha",text:"architect"},{img:"/team/michael.jpg",to:"https://keybase.io/exiledsurfer/",title:"michael",text:"comms"},{img:"/team/mark.jpg",to:"https://keybase.io/easye/",title:"mark",text:"audit"},{img:"/team/litto.jpg",to:"https://keybase.io/litto/",title:"litto",text:"gfx"},{img:"/team/kay.jpg",to:"https://keybase.io/geleeroyale/",title:"kay",text:"ops"},{img:"/team/gilo.jpg",to:"https://keybase.io/focuswalrus/",title:"gilo",text:"dev"}])},Tech=function(){return List([{img:"/techstack/gnupg.jpg",to:"https://gnupg.org/",title:"gnupg",text:"cryptography"},{img:"/techstack/codechain.jpg",to:"https://github.com/frankbraun/codechain/",title:"codechain",text:"database"},{img:"/techstack/aeternity.jpg",to:"https://aeternity.com/",title:"aeternity",text:"oracles"},{img:"/techstack/bitcoin.jpg",to:"https://bitcoin.org/",title:"bitcoin",text:"anchoring"},{img:"/techstack/ethereum.jpg",to:"https://ethereum.org/",title:"ethereum",text:"anchoring"},{img:"/techstack/cryptohippie.jpg",to:"https://cryptohippie.com/",title:"cryptohippie",text:"vpn"},{img:"/techstack/magic.jpg",to:"https://magic.github.io/",title:"magic",text:"jam gen"},{img:"/techstack/grundstein.jpg",to:"https://grundstein.it/",title:"grundstein",text:"ci/cd"},{img:"/techstack/keybase.jpg",to:"https://keybase.io/",title:"keybase",text:"proofs"}])},lib={db:{del:function del(a,b){var c=b.action,d=b.key,e=lib.db.init();d&&e[d]&&e.removeItem(d),a(c,{key:d,value:void 0})},get:function get(a,b){var c=b.action,d=b.key,e=lib.db.init(),f=void 0;return d&&e[d]&&(f=lib.json.parse(e[d]),"Error"==typeof res)?void a(c,new Error("db:read ".concat(d))):void a(c,{key:d,value:f})},init:function init(){return"undefined"!=typeof window&&window.localStorage||{}},set:function set(a,b){var c=b.action,d=b.key,e=b.value,f=lib.db.init(),g=lib.json.stringify(e);return"Error"==typeof g?void a(c,new Error("db:write ".concat(d))):void(f[d]=g,a(c,{key:d,value:e}))}},json:{parse:function parse(){return lib.tryCatch(JSON.parse).apply(void 0,arguments)},stringify:function stringify(){return lib.tryCatch(JSON.stringify).apply(void 0,arguments)}},pre:{booleans:["true","false"],builtins:["Array","Object","String","Number","RegExp","Null","Symbol","Set","WeakSet","Map","WeakMap","setInterval","setTimeout","Promise","JSON","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"],commentRegex:/(\/\/)/gim,keywords:["let","this","long","package","float","goto","private","class","if","short","while","protected","with","debugger","case","continue","volatile","interface","instanceof","super","synchronized","throw","extends","final","export","throws","try","import","double","enum","boolean","abstract","function","implements","typeof","transient","break","default","do","static","void","int","new","async","native","switch","else","delete","null","public","var","await","byte","finally","catch","in","return","for","get","const","char","module","exports","require","npm","install","=>"],stringRegex:/("|')(.*?)\1/gim,wordRegex:/( )/gim},preventDefault:function preventDefault(a){return a.preventDefault(),a},tryCatch:function tryCatch(a){return function(){try{return a.apply(void 0,arguments)}catch(a){return a}}}},actions={changeTheme:function changeTheme(a){return _objectSpread(_objectSpread({},a),{},{pageClass:_objectSpread(_objectSpread({},a.pageClass),{},{light:"dark"===a.theme}),theme:"dark"===a.theme?"light":"dark"})},gdpr:{allow:function allow(a){return[_objectSpread(_objectSpread({},a),{},{gdpr:_objectSpread(_objectSpread({},a.gdpr),{},{allowed:a.cookies.map(function(a){return a.name}),show:!1})}),[lib.db.set,{key:"magic-gdpr",value:{allowed:a.cookies.map(function(a){return a.name}),show:!1},action:[actions.gdpr.show,{show:!1}]}]]},close:function close(a){return[_objectSpread(_objectSpread({},a),{},{gdpr:_objectSpread(_objectSpread({},a.gdpr),{},{show:!1})}),[lib.db.set,{key:"magic-gdpr",value:{allowed:a.gdpr.allowed,show:!1},action:[actions.gdpr.show,{show:!1}]}]]},deny:function deny(a){return[_objectSpread(_objectSpread({},a),{},{gdpr:_objectSpread(_objectSpread({},a.gdpr),{},{allowed:[]})}),[lib.db.set,{key:"magic-gdpr",value:{allowed:[],show:!1},action:[actions.gdpr.show,{show:!1}]}]]},show:function(a,b){var c=b.show,d=b.allowed,e=void 0===d?a.gdpr.allowed:d;return b.value&&(c=b.value.show,b.value.allowed&&(e=b.value.allowed)),"boolean"==typeof c?_objectSpread(_objectSpread({},a),{},{gdpr:_objectSpread(_objectSpread({},a.gdpr),{},{show:c,allowed:e})}):a},toggleAllow:function toggleAllow(a,b){var d=b.name,e=a.gdpr,f=e.allowed.includes(d);return f?e.allowed=e.allowed.filter(function(a){return a!==d}):e.allowed.push(d),_objectSpread(_objectSpread({},a),{},{gdpr:e})}},go:function go(a,b){var c=b.currentTarget.href.replace(window.location.origin,""),d=c.split("#"),e=_slicedToArray(d,2),f=e[0],g=e[1],h=void 0===g?"":g;if(f===a.url&&h===a.hash)return h&&(window.location.hash=h),a;var i=window,j=i.scrollY,k=a.pages&&a.pages[f]&&a.pages[f].title;if(k&&(document.title=a.title=k),f===a.url)window.location.hash=h;else if(!h){var l=document.getElementsByTagName("html"),m=_slicedToArray(l,1),n=m[0],o=n.style.scrollBehavior;n.style.scrollBehavior="auto",window.scrollTo({top:0,behavior:"smooth"}),n.style.scrollBehavior=o}return window.history.pushState({url:f,hash:h,scrollY:j},a.title,c),_objectSpread(_objectSpread({},a),{},{url:f,hash:h,prev:a.url})},lightbox:{toggle:function toggle(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=1<arguments.length?arguments[1]:void 0,c=a.float,d=void 0===c?{}:c;return a.float=_objectSpread(_objectSpread({},d),{},_defineProperty({},b,!d[b])),_objectSpread({},a)}},pop:function pop(a,b){var c=window.location,d=c.pathname,e=c.hash;e=e.substring(1);var f=0;return b.state&&(d=b.state.url,e=b.state.hash,f=b.state.scrollY||0),e?window.location.hash=e:window.scroll({top:f,behavior:"smooth"}),_objectSpread(_objectSpread({},a),{},{url:d,hash:e})},pre:{clip:function clip(a,b){var c=b.content;if("undefined"!=typeof document&&"function"==typeof document.execCommand){var d=document.createElement("textarea");d.id="copy",d.innerHTML=c,document.body.appendChild(d);var e=document.getElementById("copy");e.select(),document.execCommand("copy"),document.body.removeChild(e)}return a}}},pages={"/":function _(a){return[Hero({state:a}),div({id:"about"},[h2({id:"early-bird-3"},"early bird <3"),p("hello, you are here a bit early.\nfeel free to poke around,\nbut as long as this notice is here,\nmost documentation on this page will not be accurate (yet)."),h1({id:"webboot"},"webboot?"),p(["@webboot aims to make\n",Link({to:"https://en.wikipedia.org/wiki/Trust_on_first_use",text:"tofu - trust on first use"}),"\na bit less scary."]),p("we (and you?) run a network of validator nodes,\nproviding a source of integrity to homepages and webapps."),p("we think that this is a missing protocol,\nand that something like webboot is as integral\nfor a free and secure world wide web as dns is,\njust seems that nobody thought about it before.")]),div({id:"tofu"},[h2({id:"tofu---trust-on-first-use"},"tofu - trust on first use"),LightBox({state:a,img:"/comics/brainlesstales-tofu.jpg",height:"346",width:"389",url:"https://www.brainlesstales.com/",text:"comic by brainlesstales"},[]),p("how can we trust a homepage before we even load it?"),p("this is a central problem of the web that has not been addressed. until now."),p("homepages and webapps are used to administrate a lot of our public and private lifes,\nyet most people, and many developers, do not realize,\nhow broken and dangerous the delivery method of those applications is."),p("and those of us that do?"),p("we wake up deep at night, in cold sweat, and think about becoming a gardener."),Link({to:"/tofu/",text:"Do you want to know more?"})]),div({id:"tosu"},[h2({id:"tosu---trust-on-second-and-subsequent-use"},"tosu - trust on second (and subsequent) use"),LightBox({state:a,right:"true",img:"/comics/sebiwi-trust.jpg",height:"246",width:"389",url:"https://sebiwi.github.io/",text:"comic by sebiwi"},[]),p("once we know how to load homepages safely the first time, we encounter a new problem."),p("what happens on updates?\nhow can we trust the new javascript that is now being sent from the server?"),p("this can be solved by making updates of homepages user controllable\nand by providing a \"second source of truth\" utilizing the webboot network."),p("to make sure your users will not be stuck on broken versions of your webproperties,\nthe webboot network will also allow both deprecation of versions,\nas well as propagation of urgent security fixes."),p("additionally, the @webboot network will also flag versions that break on user machines,\ngiving developers and publishers additional insight into actual app performance."),Link({to:"/tosu/",text:"Do you want to know more?"})]),div({id:"team"},[h2({id:"team"},"team"),Team()]),div({id:"tech"},[h2({id:"tech-stack"},"tech stack"),Tech()]),div({id:"support"},[h2({id:"support"},"support"),p(["the following organizations and individuals have\n",Link({to:"/support/#contribute",text:"contributed code"}),",\n",Link({to:"/support/#share-ideas",text:"shared ideas"}),",\n",Link({to:"/support/#donate",text:"donated"}),",\ngiven us a space to work, or otherwise helped @webboot."]),Support({state:a})])]},"/404/":function _(){return[h3({id:"404---not-found"},"404 - not found"),p("unfortunately, there is nothing here but nothingness."),Link({to:"/",text:"click here"})," to get back to safety\n"]},"/canary/":function canary(){return[div([Bird(),h3({id:"canary-notice"},"canary notice:"),h4({id:"we-have-never-shared-any-data-about-our-users-with-anyone"},"we have never shared any data about our users with anyone."),p(b("if this page disappears, it means that the rule above has been broken by force.")),h3({id:"data-that-might-get-compromised"},"data that might get compromised:"),h4({id:"debug-logs"},"debug logs"),p("some debugging data will be logged, for a maximum of 7 days.\nthis data will never include any ip addresses, or other identifying data."),h4({id:"pgp-keystore-metadata"},"pgp keystore metadata"),p("all email addresses and names of the gpg keys imported into the @webboot gpg keystore.\nthis is built into gpg."),p("that's it, since we do not save any other data about you, there is nothing else to steal.")])]},"/docs/api/":function docsApi(){return[div([h1({id:"api-docs"},"api docs"),p("coming soon...")])]},"/getting-started/":function gettingStarted(){return[div([h2({id:"getting-started"},"getting started"),p("we are still working on the tools described below,\nour semi-public alpha will start soon."),h3({id:"cli---coming-soon"},["cli ",em("- coming soon")]),p(["first, install webboot.\n",Pre({lines:"false"},"npm install -g webboot")]),p("then, go to the directory with your public page and run"),Pre({lines:"false"},"webboot"),p("webboot will guide you through the process."),h3({id:"browser-extensions---coming-soon"},["browser extensions ",em("- coming soon")]),p("the webboot browser extension for both firefox and chrome\nhas been uploaded to the respective app stores."),p("to install them, just click the icons below."),p("TODO: add links once they exist."),h3({id:"app-widget--embeds"},"app widget / embeds"),p("the webboot app widget allows you to embed the webboot gui into your page."),p("this allows you to show the webboot gui to every one of your users."),p("see below for available integrations:"),ul([li([h4({id:"magic---coming-soon"},[Link({to:"https://magic.github.io",text:"@magic"}),em("- coming soon")]),p("@magic is a static page generator that generates about 15kb of html + css + js boilerplate."),p("made by the people that made @webboot.")]),li([h4({id:"gatsby---coming-soon"},[Link({to:"https://www.gatsbyjs.org/",text:"gatsby"}),em("- coming soon")]),p("gatsby is a free and open source framework based on react\nand helps developers build blazing fast websites and apps.")])]),h3({id:"db---coming-soon"},["db ",em("- coming soon")]),p("the webboot validator servers will provide a publicly queryable database of hashes."),p("those hashes will be published and mirrored to three locations:"),ul([li(Link({to:"https://github.com/webboot/db",text:"github backup"})),li(Link({to:"https://gitlab.com/webboot/db",text:"gitlab backup"})),li(Link({to:"https://api.webboot.org/",text:"api.webboot.org"}))]),p("all apps will query all of those three sources for hashes everytime they check,\nmaking it very hard for any attacker to take over the system."),h3({id:"smart-contracts---coming-soon"},["smart contracts ",em("- coming soon")]),p("we are exploring smart contract based solution to decentralize both\nthe hash verification as well as the storage of the database.\nthis will add an additional layer providing\ndata persistance, integrity guarantees and network stability."),p(["once the smart contracts are in place, the\n",Link({to:"https://en.wikipedia.org/wiki/Bus_factor",text:"hit by a bus problem"}),"\nwill not be part of the equation anymore,\nmaking our team irrelevant to the wellbeing of the network."]),h3({id:"gui-coming-soon"},["gui ",em("coming soon")]),p(["first, install the cli:\n",Pre({lines:"false"},"npm install -g webboot")]),p("then, run the gui:"),Pre({lines:"false"},"webboot ui"),p(["go to the url the cli tells you (probably ",Link({to:"http://localhost:5235",text:"http://localhost:5235"}),") and start adding pages."]),h3({id:"packages"},"packages"),ul([li([h4({id:"webbootcore"},Link({to:"https://github.com/webboot/core",text:"@webboot/core"})),p("the core library functionality of @webboot. used both in clients and on the server."),Link({to:"https://webboot.github.io/core",text:"docs"})]),li([h4({id:"webbootcli"},Link({to:"https://github.com/webboot/cli",text:"@webboot/cli"})),p(["command line interface exposing the @webboot functionality to bash\n",Link({to:"https://webboot.github.io/cli",text:"docs"})])]),li([h4({id:"webbootcrypto"},Link({to:"https://github.com/webboot/crypto",text:"@webboot/crypto"})),p("all cryptographic functionality of @webboot,\nsplit into a separate repository to make testing and auditing easier."),Link({to:"https://webboot.github.io/crypto",text:"docs"})]),li([h4({id:"webbootkeys"},Link({to:"https://github.com/webboot/keys",text:"@webboot/keys"})),p("the @webboot pgp public key and fingerprint."),Link({to:"https://webboot.github.io/keys",text:"keys"})])])])]},"/privacy/":function privacy(){return[div([h2({id:"privacy-policy"},"privacy policy"),h2({id:"dos"},"Do's"),h3({id:"encourage-anonymity"},"encourage anonymity"),p("most of our services will include measures that prevent us from knowing your ip address."),p("since the threat vector in those cases are we,\n@webboot, it usually is sufficient to relay all requests through anonymizer networks."),p("for a chance at actual anonymity,\nusage of tools like tor and i2c is encouraged,\nand our networks will not block requests from those networks."),h3({id:"debug-logging"},"debug logging"),p("some debugging data will be logged, for a maximum of 7 days.\nthis data will never include any ip addresses, or other unneeded identifying data,\nand will never be collected or analyzed for tracking purposes."),h3({id:"public-data"},"public data"),p("data that gets saved online and publicly in our database:"),ol([li("signing git username"),li("signing public gpg key + metadata\n(metadata is name and email attached to that key.\nwe neither verify, extract, nor process this information, and we never will."),li("git provider (gitlab, github, ...)"),li("domain / uri"),li("git organization/account"),li("git repository (for open source)"),li("a list of files this homepage is expected to serve and their hashes."),li("a comment by the publisher, informing about the changes, optional.")]),p("this is all the data we save, there is no hidden database,\neverything we collect is also public by default."),p("all authentication is done locally using either your local gnupg installation,\nor the cryptography libraries of your browser.\nno login to our servers is possible or necessary."),p("we will run tor proxies to allow anonymous publishing.\nonce they are running, their onion addresses will be published here."),h2({id:"donts"},"Dont's"),p(["except the public data above,\nwe will never, under no circumstances,\nshare information about our users with ",b("any")," third parties."]),h3({id:"canary"},"canary:"),p(["as long as\n",Link({to:"/canary/",text:"this canary link works"}),"\nwe have not shared any data about our users with anyone."]),h3({id:"local-data"},"local data"),p("personal data we access on your machine and do not send anywhere, ever:"),ol([li("your git config user.email (never uploaded)"),li("your public gpg key associated with that email."),li("your gpg keys published on github or gitlab.")]),p("thats it.")])]},"/support/":function support(){return[div({id:"contribute"},[h1({id:"supporting-webboot"},"supporting @webboot"),h2({id:"contribute-code"},"contribute code"),p(["you are a person who knows some code and you want to get into it?\nhead over to our\n",Link({to:"https://github.com/webboot/",text:"github repositories"}),"\nand read through the issues to find something to get started with."])]),div({id:"suggestions"},[h2({id:"share-ideas"},"share ideas"),p("have an idea/suggestion how to make webboot better?"),Link({to:"https://github.com/webboot/root/issues",text:"file an issue"})]),div({id:"validate"},[h2({id:"validate-code"},"validate code"),p("you are a person who knows some code, but you do not really want to write some now?"),p(["head over to our\n",Link({to:"https://github.com/webboot/",text:"github repositories"}),"\nand read through the code, see if you spot something."]),p(["soon, @webboot and ",Link({to:"https://github.com/frankbraun/codechain/",text:"codechain"}),"\nwill allow us to create a chain of review proofs for the web."]),p("on top of that, we will implement login/registration and social networking features\nfor validation over the next few months.")]),div({id:"donate"},[h2({id:"donate"},"donate"),p("do you have that cryptocurrency wallet you want to empty\nbecause you always worry about losing the private key anyways?"),p("that wad of cash in your mattress is uncomfortable when sleeping?"),p("TODO: add wallet addresses.")])]},"/tofu/":function tofu(a){return[div([h1({id:"tofu---trust-on-first-use"},"tofu - trust on first use"),LightBox({state:a,text:"comic by brainlesstales",height:"346",img:"/comics/brainlesstales-tofu.jpg",width:"389",url:"https://www.brainlesstales.com"},[]),p("how can we trust a homepage before we even load it?"),p("this is a central problem of the web that has not been addressed. until now."),p("how can we trust a homepage which manages\nour money, our stocks, our insurance plan,\nour routers, our friend list, our private messages,\nnot to send us malicious code, intended or unintended."),p("homepages and webapps are used to administrate a lot of our public and private lifes,\nyet most people, and many developers, do not realize,\nhow broken and dangerous the delivery method of those applications is."),p("and those of us that do?\nwe wake up deep at night, in cold sweat, and think about becoming a gardener."),h2({id:"solutions"},"solutions"),p("so, how do we solve this problem using existing technology?"),h3({id:"auditing"},"auditing"),p("the javascript of a homepage (in 2020) tends to be about 1+ megabyte of\ngarbled text with shortened variable names and removed whitespace."),p("behind that megabyte(s) of garbled text lurk dependencies of dependencies of dependencies.\nusually thousands of them."),p("this is not necessarily a bad thing,\nbut it makes verification, updating and auditing a lot more complicated."),p("most developers do not even read the libraries they depend upon."),p("in comparison, the average terms of service are 50kb to 100kb in size,\nand when did any of us last read one of those?"),p("tos have whitespace and use plain language.\nthey also usually do not change every few days."),p("this means that auditing (especially since it has to be done on every page load)\ndoes not seem to be a viable solution here."),h3({id:"formal-verification"},"formal verification"),p("theoretically,\nevery script could be analyzed and proven to do what it should in every situation."),p(["but ",Link({to:"https://en.wikipedia.org/wiki/List_of_software_bugs",text:"testing"})," software is hard."]),p(["it's not yet (nor soon) possible to use\n",Link({to:"https://en.wikipedia.org/wiki/Artificial_intelligence",text:"ai"}),"\nto add tests and comments to software,\nand once it is possible,\nthe same ai will also write the functionality it tests, describes, and proves."]),p("without ai, this would create millions of peoplehours of work."),p("not something that we can assume to happen either."),h3({id:"browsers"},"browsers"),p("browsers could implement a versioning system for assets, and they partially have."),p(["one key part are\n",Link({to:"https://en.wikipedia.org/wiki/Subresource_Integrity",text:"subresource integrity hashes"}),"\nwhich proof, that the hash the server created for the piece of payload he expects to have sent\nwill correspond to the hash the browser creates on load."]),p("almost noone uses them,\nnone of the big web frameworks provides sri hashes for the sources they create."),p("even if those hashes were standard,\nsubresource identity hashes only provide a certain level of security,\na compromised server can send\ncompromised scripts and compromised hashes derived from those scripts\nand the browser, as well as the person behind the screen, would be non the wiser."),p(em("hint: combine sri-hashes with the @webboot database and suddenly things look a lot better.")),h3({id:"service-worker-caching"},"service worker caching"),p("service workers allow us to cache\nthe contents of a homepage for later use and make the homepage available offline."),p("using that caching mechanism in a smart way,\nan upgrade and deprecation mechanism can be implemented,\nprompting the user to update the homepage scripts to the new version when needed."),p("this solves parts of the tosu problem, giving control of homepage versioning to users,\nwhere it should always have been."),h3({id:"browser-extensions"},"browser extensions"),p(["the\n",Link({to:"https://github.com/hackademix/noscript",text:"noscript"}),"\nbrowser extension actually uses sri hashes to block javascript,\nit just adds a hash to the <script identity=\"bogus\">\ntag that will not match any script."]),p("this makes the browser reject the script before executing it."),p("now what if, instead of adding a bogus hash, we add the expected hash?"),p("this would make a lot of places on the www a lot safer in an instant,\nyet allow some pages that need javascript to function."),p(em("every noscript user knows how often we disable it to get some page to load,\ndespite our principles")),p("we need a magical source of truth for those hashes, and this is what @webboot provides."),h3({id:"homepage-developers"},"homepage developers"),p("developers will need a way to authorize and verify new hashes of homepages they control."),p("this also includes verification of control of that homepage property,\n using either a domain.com/keybase.txt identity or a domain.com/keys.txt file."),p("using those keys, hashes can be cryptographically verified and checked when being submitted,\nmaking it possible to create chains of trust\nthat end with the actual developers of the properties."),p("others can then audit the changes and add their verification,\nmaking the chain links even stronger."),p("TODO: add information about client side functionality, how the cryptography works etc."),p("wow, you made it. this was a lot of information.\nare you insatiable?"),p(["there is more ahead,\nready to read about the ",Link({to:"/tosu/",text:"tosu"})," problem next?"])])]},"/tosu/":function tosu(a){return[div([h1({id:"tosu---trust-on-second-and-subsequent-use"},"tosu - trust on second (and subsequent) use"),LightBox({state:a,url:"https://sebiwi.github.io/",text:"comic by sebiwi",height:"246",img:"/comics/sebiwi-trust.jpg",width:"389"},[]),p("tosu. we made that up. but being written somewhere on the internet makes it a thing now.\nthere also might be a wikipedia page in the near future,\nand once there is, we will link it here."),p(["lets assume we solved the ",Link({to:"/tofu/",text:"tofu problem"}),",\nwe loaded the first version of a homepage in a trustable way,\nand we have the working application running on our device now."]),p("great."),p("now what happens when the server wants to update our client app?"),p("how will we verify that the update actually is a piece of software we want to run?"),h2({id:"threat-vectors"},"threat vectors"),h3({id:"hackers"},"hackers"),p("maybe someone hacked the servers between our first use of the app and now."),h3({id:"mitm-attack"},"mitm attack"),p(["the https connection to the server might have been\n",Link({to:"https://en.wikipedia.org/wiki/Man-in-the-middle_attack",text:"man in the middled"}),"\nin the country/company/coffeshop network we just connected to."]),p(["simply said: we ",Link({to:"https://tools.ietf.org/html/rfc2119#section-2",text:"MUST NOT"}),"\ntrust the server to send us valid code,\nquite the opposite actually,\nwe ",Link({to:"https://tools.ietf.org/html/rfc2119#section-3",text:"SHOULD"}),"\nassume to get malicious payloads."]),h3({id:"broken-code"},"broken code"),p("the developers of an app might have shipped a version of the code that does not work."),p("if only we could go back to the version of 5 minutes ago."),h2({id:"solution"},"solution"),p("this problem can be solved by making updates of homepages controllable by us, the users,\nand by providing an additional \"source of integrity proofs\" using the @webboot network."),p("to make sure no user gets stuck on old and broken versions of an app,\nthe webboot network will also allow both deprecation of versions,\nas well as urgent security fixes."),p("the browser ui (either obtained via browser extension or embedded using our @magic widgets)\nwill notify the user about updates and security related deprecations,\nbut still leave the user in as much control as possible.\nif there is full trust,\nall updates for pages can also be accepted automatically\nand on a per-page basis,\nthey will then be checked by webboot in the background,\nnot disrupting the workflows at all, until it needs to.")])]}};app({init:[_objectSpread(_objectSpread({},initialState),{},{url:window.location.pathname,hash:window.location.hash.substr(1)}),[[lib.db.get,{key:"magic-gdpr",action:actions.gdpr.show}]]],subscriptions:function subscriptions(){return[[helpers.listenPopState,actions.pop]]},view:function(a){var b=pages[a.url]?a.url:"/404/",c=pages[b],d=a.pages&&a.pages[b];return d&&Object.keys(d).forEach(function(b){a[b]=d[b]}),a.url=b,Page({page:c,state:a},[LightSwitch(a),Gdpr(a)])},node:document.getElementById("Magic")});